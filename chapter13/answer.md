# 第十三章 拷贝控制

## 13.1
拷贝构造函数是一个特殊的构造函数，满足下面的三个条件:  
1. 是构造函数  
2. 第一个形参是类自身类型的引用  
3. 后面的形参都有默认值  

拷贝构造函数将会在如下场景中被调用:  
1. 拷贝初始化  
2. 非引用的函数参数  
3. 非引用的函数返回值  
4. 用花括号列表初始化数组或聚合类  
5. 初始化标准库容器或调用insert和push时  

## 13.2
该声明是该类的拷贝构造函数，其函数参数是非引用的，非引用的函数参数在函数被调用时会调用自身的拷贝构造函数为形参赋值，而该形参是该类类型，其拷贝构造函数尚未实现，故该声明是非法的。

## 13.3
会调用编译器实现的合成拷贝构造函数

## 13.4
1. 函数形参处  
2. local = arg 处  
3. *heap = new Point(global) 处  //错误，此处为普通构造
4. *heap = local处  
5. 倒数第二行处  
6. 函数返回值处  

## 13.5
```c++
HasPtr(const HasPtr &hp): ps(new string(*hp.ps)), i(hp.i) {}
```

## 13.6
拷贝赋值运算符是=符号的重载  
将会在赋值时使用拷贝赋值运算符  
依次对类的非static数据成员进行拷贝赋值  
未定义拷贝赋值运算符时  

## 13.7
会调用合成拷贝赋值运算符

## 13.8
```c++
HasPtr &operator=(const HasPtr &hp) {
    delete ps;  //要先把ps原来指向的内存释放，否则会造成内存泄漏
    ps = new string(*hp.ps);
    i = hp.i;
    return *this;
}
```
## 13.9
析构函数